/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dijit.layout.StackContainer"]||(dojo._hasResource["dijit.layout.StackContainer"]=!0,dojo.provide("dijit.layout.StackContainer"),dojo.require("dijit._Templated"),dojo.require("dijit.layout._LayoutWidget"),dojo.requireLocalization("dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw"),dojo.require("dojo.cookie"),dojo.require("dijit.layout.StackController"),dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,
{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel")},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var a=this.getChildren();dojo.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild")):
dojo.some(a,function(a){if(a.selected)this.selectedChildWidget=a;return a.selected},this);var b=this.selectedChildWidget;if(!b&&a[0])b=this.selectedChildWidget=a[0],b.selected=!0;dojo.publish(this.id+"-startup",[{children:a,selected:b}]);this.inherited(arguments)}},resize:function(){var a=this.selectedChildWidget;if(a&&!this._hasBeenShown)this._hasBeenShown=!0,this._showChild(a);this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);dojo.replaceClass(a.domNode,"dijitHidden",
"dijitVisible");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&(dojo.publish(this.id+"-addChild",[a,b]),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){this.inherited(arguments);this._started&&dojo.publish(this.id+"-removeChild",[a]);if(!this._beingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var b=this.getChildren();b.length&&this.selectChild(b[0])}this._started&&this.layout()}},
selectChild:function(a,b){a=dijit.byId(a);if(this.selectedChildWidget!=a){var c=this._transition(a,this.selectedChildWidget,b);this._set("selectedChildWidget",a);dojo.publish(this.id+"-selectChild",[a]);this.persist&&dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}return c},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),
c=dojo.indexOf(b,this.selectedChildWidget);c+=a?1:b.length-1;return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize&&this.selectedChildWidget.resize(this._containerContentBox||this._contentBox)},_showChild:function(a){var b=this.getChildren();
a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);dojo.replaceClass(a.domNode,"dijitVisible","dijitHidden");return a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);dojo.replaceClass(a.domNode,"dijitHidden","dijitVisible");a.onHide()},closeChild:function(a){a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){this.removeChild(b);b.destroyRecursive(a)},this)}}),dojo.extend(dijit._Widget,
{selected:!1,closable:!1,iconClass:"",showTitle:!0}));