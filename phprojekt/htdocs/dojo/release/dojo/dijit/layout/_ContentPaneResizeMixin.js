/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]||(dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]=!0,dojo.provide("dijit.layout._ContentPaneResizeMixin"),dojo.require("dijit._Contained"),dojo.require("dijit.layout._LayoutWidget"),dojo.declare("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isContainer:!0,isLayoutContainer:!0,_startChildren:function(){dojo.forEach(this.getChildren(),function(a){a.startup();a._started=!0})},startup:function(){if(!this._started){var a=dijit._Contained.prototype.getParent.call(this);
this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._startChildren();this._isShown()&&this._onShow();this._childOfLayoutWidget||this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this._needLayout=!this._childOfLayoutWidget;this.resize()})}},_checkIfSingleChild:function(){var a=dojo.query("> *",this.containerNode).filter(function(a){return a.tagName!=="SCRIPT"}),b=a.filter(function(a){return dojo.hasAttr(a,"data-dojo-type")||
dojo.hasAttr(a,"dojoType")||dojo.hasAttr(a,"widgetId")}),c=dojo.filter(b.map(dijit.byNode),function(a){return a&&a.domNode&&a.resize});a.length==b.length&&c.length==1?this._singleChild=c[0]:delete this._singleChild;dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){!this._wasShown&&this.open!==!1&&this._onShow();this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=
!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){a&&dojo.marginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var d=b||{};dojo.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=dojo.mixin(dojo.marginBox(c),d);this._contentBox=dijit.layout.marginBox2contentBox(c,d)}else this._contentBox=dojo.contentBox(c);this._layoutChildren();delete this._needLayout},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=
this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else dojo.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;else if("open"in this)return this.open;else{var a=this.domNode,b=this.domNode.parentNode;return a.style.display!="none"&&a.style.visibility!="hidden"&&!dojo.hasClass(a,"dijitHidden")&&b&&b.style&&b.style.display!="none"}},
_onShow:function(){this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments);this._wasShown=!0}}));