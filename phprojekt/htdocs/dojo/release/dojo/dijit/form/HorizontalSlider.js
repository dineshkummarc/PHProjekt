/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dijit.form.HorizontalSlider"]||(dojo._hasResource["dijit.form.HorizontalSlider"]=!0,dojo.provide("dijit.form.HorizontalSlider"),dojo.require("dijit.form._FormWidget"),dojo.require("dijit._Container"),dojo.require("dojo.dnd.move"),dojo.require("dijit.form.Button"),dojo.require("dojo.number"),dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html",'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div role="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onmousedown:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachEvent="onmousedown:_onHandleClick" role="slider" valuemin="${minimum}" valuemax="${maximum}"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onmousedown:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n'),
value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:dijit.defaultDuration,widgetsInTemplate:!0,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",
_progressPixelSize:"width",_onKeyUp:function(a){!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey&&this._setValueAttr(this.value,!0)},_onKeyPress:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey){switch(a.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,!1);break;case dojo.keys.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW:case this._descending===!1?
dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW:case this._descending===!1?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW:case this._descending===!1?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW:case this._descending===!1?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN:this.decrement(a);break;default:return}dojo.stopEvent(a)}},_onHandleClick:function(a){!this.disabled&&!this.readOnly&&(dojo.isIE||dijit.focus(this.sliderHandle),
dojo.stopEvent(a))},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){dijit.focus(this.sliderHandle);dojo.stopEvent(a);var b=dojo.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;
if(d<=1||d==Infinity)d=b;d--;this._setValueAttr((this.maximum-this.minimum)*Math.round((a<0?0:b<a?b:a)/(b/d))/d+this.minimum,c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments);var c=(a-this.minimum)/(this.maximum-this.minimum),d=this._descending===!1?this.remainingBar:this.progressBar,g=this._descending===!1?this.progressBar:this.remainingBar;this._inProgressAnim&&this._inProgressAnim.status!="stopped"&&
this._inProgressAnim.stop(!0);if(b&&this.slideDuration>0&&d.style[this._progressPixelSize]){var f=this,h={},i=parseFloat(d.style[this._progressPixelSize]),e=this.slideDuration*(c-i/100);if(e!=0)e<0&&(e=0-e),h[this._progressPixelSize]={start:i,end:c*100,units:"%"},this._inProgressAnim=dojo.animateProperty({node:d,duration:e,onAnimate:function(a){g.style[f._progressPixelSize]=100-parseFloat(a[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:h}),this._inProgressAnim.play()}else d.style[this._progressPixelSize]=
c*100+"%",g.style[this._progressPixelSize]=(1-c)*100+"%"},_bumpValue:function(a,b){if(!this.disabled&&!this.readOnly){var c=dojo.getComputedStyle(this.sliderBarContainer),d=dojo._getContentBox(this.sliderBarContainer,c),c=this.discreteValues;if(c<=1||c==Infinity)c=d[this._pixelCount];c--;d=(this.value-this.minimum)*c/(this.maximum-this.minimum)+a;d<0&&(d=0);d>c&&(d=c);d=d*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(d,b)}},_onClkBumper:function(a){!this.disabled&&!this.readOnly&&
this.clickSelect&&this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(this._descending===!1?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(this._descending===!1?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){dojo.stopEvent(a);var b=!dojo.isMozilla;this._bumpValue(a[b?
"wheelDelta":"detail"]*(b?1:-1)<0?-1:1,!0)},startup:function(){this._started||(dojo.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(a==-1)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);if(this.showButtons)this.incrementButton.style.display=
"",this.decrementButton.style.display="";var a=dojo.query('label[for="'+this.id+'"]');if(a.length)a[0].id=this.id+"_label",dijit.setWaiState(this.focusNode,"labelledby",a[0].id);dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&(this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500)),this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,
this,"_typematicCallback",25,500)));this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var a=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:a});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&this._inProgressAnim.status!="stopped"&&this._inProgressAnim.stop(!0);this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments)}}),dojo.declare("dijit.form._SliderMover",
dojo.dnd.Mover,{onMouseMove:function(a){var b=this.widget,c=b._abspos;if(!c)c=b._abspos=dojo.position(b.sliderBarContainer,!0),b._setPixelValue_=dojo.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed();a=(a.touches?a.touches[0]:a)[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}}));