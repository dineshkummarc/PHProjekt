/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.fx.flip"]){dojo._hasResource["dojox.fx.flip"]=!0;dojo.provide("dojox.fx.flip");dojo.require("dojo.fx");dojo.experimental("dojox.fx.flip");var borderConst="border",widthConst="Width",heightConst="Height",topConst="Top",rightConst="Right",leftConst="Left",bottomConst="Bottom";dojox.fx.flip=function(c){var l=dojo.create("div"),d=c.node=dojo.byId(c.node),g=d.style,b=null,j=null,a=null,n=c.lightColor||"#dddddd",r=c.darkColor||"#555555",o=dojo.style(d,"backgroundColor"),p=c.endColor||
o,m={},k=[],h=c.duration?c.duration/2:250,a=c.dir||"left",i=0.9,j="transparent",s=c.whichAnim,q=c.axis||"center",i=c.depth,e=function(a){return(new dojo.Color(a)).toHex()==="#000000"?"#000001":a};if(dojo.isIE<7)p=e(p),n=e(n),r=e(r),o=e(o),j="black",l.style.filter="chroma(color='#000000')";(function(a){return function(){var c=dojo.coords(a,!0);b={top:c.y,left:c.x,width:c.w,height:c.h}}})(d)();j={position:"absolute",top:b.top+"px",left:b.left+"px",height:"0",width:"0",zIndex:c.zIndex||g.zIndex||0,border:"0 solid "+
j,fontSize:"0",visibility:"hidden"};d=[{},{top:b.top,left:b.left}];a={left:[leftConst,rightConst,topConst,bottomConst,widthConst,heightConst,"end"+heightConst+"Min",leftConst,"end"+heightConst+"Max"],right:[rightConst,leftConst,topConst,bottomConst,widthConst,heightConst,"end"+heightConst+"Min",leftConst,"end"+heightConst+"Max"],top:[topConst,bottomConst,leftConst,rightConst,heightConst,widthConst,"end"+widthConst+"Min",topConst,"end"+widthConst+"Max"],bottom:[bottomConst,topConst,leftConst,rightConst,
heightConst,widthConst,"end"+widthConst+"Min",topConst,"end"+widthConst+"Max"]}[a];typeof i!="undefined"?(i=Math.max(0,Math.min(1,i))/2,i=0.4+(0.5-i)):i=Math.min(0.9,Math.max(0.4,b[a[5].toLowerCase()]/b[a[4].toLowerCase()]));for(var e=d[0],f=4;f<6;f++)q=="center"||q=="cube"?(b["end"+a[f]+"Min"]=b[a[f].toLowerCase()]*i,b["end"+a[f]+"Max"]=b[a[f].toLowerCase()]/i):q=="shortside"?(b["end"+a[f]+"Min"]=b[a[f].toLowerCase()],b["end"+a[f]+"Max"]=b[a[f].toLowerCase()]/i):q=="longside"&&(b["end"+a[f]+"Min"]=
b[a[f].toLowerCase()]*i,b["end"+a[f]+"Max"]=b[a[f].toLowerCase()]);q=="center"?e[a[2].toLowerCase()]=b[a[2].toLowerCase()]-(b[a[8]]-b[a[6]])/4:q=="shortside"&&(e[a[2].toLowerCase()]=b[a[2].toLowerCase()]-(b[a[8]]-b[a[6]])/2);m[a[5].toLowerCase()]=b[a[5].toLowerCase()]+"px";m[a[4].toLowerCase()]="0";m[borderConst+a[1]+widthConst]=b[a[4].toLowerCase()]+"px";m[borderConst+a[1]+"Color"]=o;e[borderConst+a[1]+widthConst]=0;e[borderConst+a[1]+"Color"]=r;e[borderConst+a[2]+widthConst]=e[borderConst+a[3]+
widthConst]=q!="cube"?(b["end"+a[5]+"Max"]-b["end"+a[5]+"Min"])/2:b[a[6]]/2;e[a[7].toLowerCase()]=b[a[7].toLowerCase()]+b[a[4].toLowerCase()]/2+(c.shift||0);e[a[5].toLowerCase()]=b[a[6]];c=d[1];c[borderConst+a[0]+"Color"]={start:n,end:p};c[borderConst+a[0]+widthConst]=b[a[4].toLowerCase()];c[borderConst+a[2]+widthConst]=0;c[borderConst+a[3]+widthConst]=0;c[a[5].toLowerCase()]={start:b[a[6]],end:b[a[5].toLowerCase()]};dojo.mixin(j,m);dojo.style(l,j);dojo.body().appendChild(l);n=function(){dojo.destroy(l);
g.backgroundColor=p;g.visibility="visible"};if(s=="last"){for(f in e)e[f]={start:e[f]};e[borderConst+a[1]+"Color"]={start:r,end:p};c=e}(!s||s=="first")&&k.push(dojo.animateProperty({node:l,duration:h,properties:e}));(!s||s=="last")&&k.push(dojo.animateProperty({node:l,duration:h,properties:c,onEnd:n}));dojo.connect(k[0],"play",function(){l.style.visibility="visible";g.visibility="hidden"});return dojo.fx.chain(k)};dojox.fx.flipCube=function(c){var l=[],d=dojo.marginBox(c.node),g=d.w/2,d=d.h/2,g={top:{pName:"height",
args:[{whichAnim:"first",dir:"top",shift:-d},{whichAnim:"last",dir:"bottom",shift:d}]},right:{pName:"width",args:[{whichAnim:"first",dir:"right",shift:g},{whichAnim:"last",dir:"left",shift:-g}]},bottom:{pName:"height",args:[{whichAnim:"first",dir:"bottom",shift:d},{whichAnim:"last",dir:"top",shift:-d}]},left:{pName:"width",args:[{whichAnim:"first",dir:"left",shift:-g},{whichAnim:"last",dir:"right",shift:g}]}}[c.dir||"left"].args;c.duration=c.duration?c.duration*2:500;c.depth=0.8;c.axis="cube";for(d=
g.length-1;d>=0;d--)dojo.mixin(c,g[d]),l.push(dojox.fx.flip(c));return dojo.fx.combine(l)};dojox.fx.flipPage=function(c){var l=c.node,d=dojo.coords(l,!0),g=d.x,b=d.y,j=d.w,a=d.h,n=dojo.style(l,"backgroundColor"),r=c.lightColor||"#dddddd",o=c.darkColor,p=dojo.create("div"),m=[],k=[],h=c.dir||"right",i={left:["left","right","x","w"],top:["top","bottom","y","h"],right:["left","left","x","w"],bottom:["top","top","y","h"]},s={right:[1,-1],left:[-1,1],top:[-1,1],bottom:[1,-1]};dojo.style(p,{position:"absolute",
width:j+"px",height:a+"px",top:b+"px",left:g+"px",visibility:"hidden"});g=[];for(b=0;b<2;b++){var a=(j=b%2)?i[h][1]:h,q=j?"last":"first",e=j?n:r,f=j?e:c.startColor||l.style.backgroundColor;k[b]=dojo.clone(p);var t=function(a){return function(){dojo.destroy(k[a])}}(b);dojo.body().appendChild(k[b]);g[b]={backgroundColor:j?f:n};g[b][i[h][0]]=d[i[h][2]]+s[h][0]*b*d[i[h][3]]+"px";dojo.style(k[b],g[b]);m.push(dojox.fx.flip({node:k[b],dir:a,axis:"shortside",depth:c.depth,duration:c.duration/2,shift:s[h][b]*
d[i[h][3]]/2,darkColor:o,lightColor:r,whichAnim:q,endColor:e}));dojo.connect(m[b],"onEnd",t)}return dojo.fx.chain(m)};dojox.fx.flipGrid=function(c){var l=c.rows||4,d=c.cols||4,g=[],b=dojo.create("div"),j=c.node,a=dojo.coords(j,!0),n=a.x,r=a.y,o=a.w,p=a.h,m=a.w/d,k=a.h/l,a=[];dojo.style(b,{position:"absolute",width:m+"px",height:k+"px",backgroundColor:dojo.style(j,"backgroundColor")});for(var h=0;h<l;h++){var i=h%2,s=i?"right":"left",q=i?1:-1,e=dojo.clone(j);dojo.style(e,{position:"absolute",width:o+
"px",height:p+"px",top:r+"px",left:n+"px",clip:"rect("+h*k+"px,"+o+"px,"+p+"px,0)"});dojo.body().appendChild(e);g[h]=[];for(var f=0;f<d;f++){var t=dojo.clone(b),u=i?f:d-(f+1),v=function(a,b,c){return function(){b%2?dojo.style(a,{clip:"rect("+b*k+"px,"+o+"px,"+(b+1)*k+"px,"+(c+1)*m+"px)"}):dojo.style(a,{clip:"rect("+b*k+"px,"+(o-(c+1)*m)+"px,"+(b+1)*k+"px,0px)"})}}(e,h,f);dojo.body().appendChild(t);dojo.style(t,{left:n+u*m+"px",top:r+h*k+"px",visibility:"hidden"});u=dojox.fx.flipPage({node:t,dir:s,
duration:c.duration||900,shift:q*m/2,depth:0.2,darkColor:c.darkColor,lightColor:c.lightColor,startColor:c.startColor||c.node.style.backgroundColor});t=function(a){return function(){dojo.destroy(a)}}(t);dojo.connect(u,"play",this,v);dojo.connect(u,"play",this,t);g[h].push(u)}a.push(dojo.fx.chain(g[h]))}dojo.connect(a[0],"play",function(){dojo.style(j,{visibility:"hidden"})});return dojo.fx.combine(a)}};