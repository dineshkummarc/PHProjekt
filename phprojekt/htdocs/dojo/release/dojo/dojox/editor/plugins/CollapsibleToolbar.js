/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.editor.plugins.CollapsibleToolbar"]||(dojo._hasResource["dojox.editor.plugins.CollapsibleToolbar"]=!0,dojo.provide("dojox.editor.plugins.CollapsibleToolbar"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.require("dijit._editor._Plugin"),dojo.require("dijit.form.Button"),dojo.require("dojo.i18n"),dojo.requireLocalization("dojox.editor.plugins","CollapsibleToolbar",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw"),
dojo.declare("dojox.editor.plugins._CollapsibleToolbarButton",[dijit._Widget,dijit._Templated],{templateString:"<div tabindex='0' role='button' title='${title}' class='${buttonClass}' dojoAttachEvent='ondijitclick: onClick'><span class='${textClass}'>${text}</span></div>",title:"",buttonClass:"",text:"",textClass:"",onClick:function(){}}),dojo.declare("dojox.editor.plugins.CollapsibleToolbar",dijit._editor._Plugin,{_myWidgets:null,setEditor:function(a){this.editor=a;this._constructContainer()},_constructContainer:function(){var a=
dojo.i18n.getLocalization("dojox.editor.plugins","CollapsibleToolbar");this._myWidgets=[];var f=dojo.create("table",{style:{width:"100%"},tabindex:-1,"class":"dojoxCollapsibleToolbarContainer"}),c=dojo.create("tbody",{tabindex:-1},f),b=dojo.create("tr",{tabindex:-1},c),c=dojo.create("td",{"class":"dojoxCollapsibleToolbarControl",tabindex:-1},b),d=dojo.create("td",{"class":"dojoxCollapsibleToolbarControl",tabindex:-1},b),b=dojo.create("td",{style:{width:"100%"},tabindex:-1},b),b=dojo.create("span",
{style:{width:"100%"},tabindex:-1},b),e=new dojox.editor.plugins._CollapsibleToolbarButton({buttonClass:"dojoxCollapsibleToolbarCollapse",title:a.collapse,text:"-",textClass:"dojoxCollapsibleToolbarCollapseText"});dojo.place(e.domNode,c);a=new dojox.editor.plugins._CollapsibleToolbarButton({buttonClass:"dojoxCollapsibleToolbarExpand",title:a.expand,text:"+",textClass:"dojoxCollapsibleToolbarExpandText"});dojo.place(a.domNode,d);this._myWidgets.push(e);this._myWidgets.push(a);dojo.style(d,"display",
"none");dojo.place(f,this.editor.toolbar.domNode,"after");dojo.place(this.editor.toolbar.domNode,b);this.openTd=c;this.closeTd=d;this.menu=b;this.connect(e,"onClick","_onClose");this.connect(a,"onClick","_onOpen")},_onClose:function(a){a&&dojo.stopEvent(a);a=dojo.marginBox(this.editor.domNode);dojo.style(this.openTd,"display","none");dojo.style(this.closeTd,"display","");dojo.style(this.menu,"display","none");this.editor.resize({h:a.h});if(dojo.isIE)this.editor.header.className=this.editor.header.className,
this.editor.footer.className=this.editor.footer.className;dijit.focus(this.closeTd.firstChild)},_onOpen:function(a){a&&dojo.stopEvent(a);a=dojo.marginBox(this.editor.domNode);dojo.style(this.closeTd,"display","none");dojo.style(this.openTd,"display","");dojo.style(this.menu,"display","");this.editor.resize({h:a.h});if(dojo.isIE)this.editor.header.className=this.editor.header.className,this.editor.footer.className=this.editor.footer.className;dijit.focus(this.openTd.firstChild)},destroy:function(){this.inherited(arguments);
if(this._myWidgets){for(;this._myWidgets.length;)this._myWidgets.pop().destroy();delete this._myWidgets}}}),dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin&&a.args.name.toLowerCase()==="collapsibletoolbar")a.plugin=new dojox.editor.plugins.CollapsibleToolbar({})}));