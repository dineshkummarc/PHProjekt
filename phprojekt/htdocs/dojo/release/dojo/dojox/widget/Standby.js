/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.widget.Standby"]||(dojo._hasResource["dojox.widget.Standby"]=!0,dojo.provide("dojox.widget.Standby"),dojo.require("dojo.window"),dojo.require("dojo.fx"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.experimental("dojox.widget.Standby"),dojo.declare("dojox.widget.Standby",[dijit._Widget,dijit._Templated],{templateString:'<div><div style="display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint="_underlayNode"></div><img src="${image}" style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint="_imageNode"><div style="opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint="_textNode"></div></div>',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,image:dojo.moduleUrl("dojox","widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",_displayed:!1,_resizeCheck:null,target:"",color:"#C0C0C0",duration:500,_started:!1,_parent:null,zIndex:"auto",startup:function(){if(!this._started){if(typeof this.target==="string"){var a=dijit.byId(this.target);this.target=a?a.domNode:dojo.byId(this.target)}if(this.text)this._textNode.innerHTML=
this.text;this.centerIndicator==="image"?(this._centerNode=this._imageNode,dojo.attr(this._imageNode,"src",this.image),dojo.attr(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;dojo.style(this._underlayNode,{display:"none",backgroundColor:this.color});dojo.style(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=dojo.body()&&dojo.body().appendChild(this.domNode);if(dojo.isIE==7)this._ieFixNode=
dojo.doc.createElement("div"),dojo.style(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),dojo.body().appendChild(this._ieFixNode)}},show:function(){if(!this._displayed)this._anim&&(this._anim.stop(),delete this._anim),this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn()},hide:function(){if(this._displayed&&(this._anim&&(this._anim.stop(),delete this._anim),this._size(),this._fadeOut(),this._displayed=!1,this._resizeCheck!==null))clearInterval(this._resizeCheck),
this._resizeCheck=null},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);dojo.style(this._centerNode,"display","none");dojo.style(this._underlayNode,"display","none");dojo.isIE==7&&(dojo.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},
_size:function(){if(this._displayed){var a=dojo.attr(dojo.body(),"dir");a&&(a=a.toLowerCase());var e,f=this._scrollerWidths(),c=this.target,d=dojo.style(this._centerNode,"display");dojo.style(this._centerNode,"display","block");var b=dojo.position(c,!0);if(c===dojo.body()||c===dojo.doc)b=dojo.window.getBox(),b.x=b.l,b.y=b.t;var k=dojo.marginBox(this._centerNode);dojo.style(this._centerNode,"display",d);if(this._ieFixNode)e=-this._ieFixNode.offsetTop/1E3,b.x=Math.floor((b.x+0.9)/e),b.y=Math.floor((b.y+
0.9)/e),b.w=Math.floor((b.w+0.9)/e),b.h=Math.floor((b.h+0.9)/e);var g=dojo.style(c,"zIndex"),h=d=g;if(this.zIndex==="auto")if(g!="auto")d=parseInt(d,10)+1,h=parseInt(h,10)+2;else{var i=c.parentNode;for(e=-1E5;i&&i!==dojo.body();){if((g=dojo.style(i,"zIndex"))&&g!=="auto")g=parseInt(g,10),e<g&&(e=g,d=g+1,h=g+2);i=i.parentNode}}else d=parseInt(this.zIndex,10)+1,h=parseInt(this.zIndex,10)+2;dojo.style(this._centerNode,"zIndex",h);dojo.style(this._underlayNode,"zIndex",d);if((d=c.parentNode)&&d!==dojo.body()&&
c!==dojo.body()&&c!==dojo.doc){i=b.h;h=b.w;c=dojo.position(d,!0);if(this._ieFixNode)e=-this._ieFixNode.offsetTop/1E3,c.x=Math.floor((c.x+0.9)/e),c.y=Math.floor((c.y+0.9)/e),c.w=Math.floor((c.w+0.9)/e),c.h=Math.floor((c.h+0.9)/e);c.w-=d.scrollHeight>d.clientHeight&&d.clientHeight>0?f.v:0;c.h-=d.scrollWidth>d.clientWidth&&d.clientWidth>0?f.h:0;a==="rtl"&&(dojo.isOpera?(b.x+=d.scrollHeight>d.clientHeight&&d.clientHeight>0?f.v:0,c.x+=d.scrollHeight>d.clientHeight&&d.clientHeight>0?f.v:0):dojo.isIE&&(c.x+=
d.scrollHeight>d.clientHeight&&d.clientHeight>0?f.v:0));c.w<b.w&&(b.w-=c.w);c.h<b.h&&(b.h-=c.h);var l=c.y,m=c.y+c.h,j=b.y,n=b.y+i,a=c.x;e=c.x+c.w;var g=b.x,o=b.x+h;if(n>l&&j<l)b.y=c.y,i-=l-j,i<c.h?b.h=i:b.h-=2*(d.scrollWidth>d.clientWidth&&d.clientWidth>0?f.h:0);else if(j<m&&n>m)b.h=m-j;else if(n<=l||j>=m)b.h=0;if(o>a&&g<a)b.x=c.x,h-=a-g,h<c.w?b.w=h:b.w-=2*(d.scrollHeight>d.clientHeight&&d.clientHeight>0?f.w:0);else if(g<e&&o>e)b.w=e-g;else if(o<=a||g>=e)b.w=0}b.h>0&&b.w>0?(dojo.style(this._underlayNode,
{display:"block",width:b.w+"px",height:b.h+"px",top:b.y+"px",left:b.x+"px"}),f=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(f),dojo.isIE||(f=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"],this._cloneStyles(f,
this)),f=b.h/2-k.h/2,d=b.w/2-k.w/2,b.h>=k.h&&b.w>=k.w?dojo.style(this._centerNode,{top:f+b.y+"px",left:d+b.x+"px",display:"block"}):dojo.style(this._centerNode,"display","none")):(dojo.style(this._underlayNode,"display","none"),dojo.style(this._centerNode,"display","none"));if(this._resizeCheck===null){var p=this;this._resizeCheck=setInterval(function(){p._size()},100)}}},_cloneStyles:function(a){dojo.forEach(a,function(a){dojo.style(this._underlayNode,a,dojo.style(this.target,a))},this)},_fadeIn:function(){var a=
this,e=dojo.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:0.75}}}),f=dojo.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){a.onShow();delete a._anim}});this._anim=dojo.fx.combine([e,f]);this._anim.play()},_fadeOut:function(){var a=this,e=dojo.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0.75,end:0}},onEnd:function(){dojo.style(this.node,{display:"none",
zIndex:"-1000"})}}),f=dojo.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){dojo.style(this.node,{display:"none",zIndex:"-1000"});a.onHide();a._enableOverflow();delete a._anim}});this._anim=dojo.fx.combine([e,f]);this._anim.play()},_ignore:function(a){a&&dojo.stopEvent(a)},_scrollerWidths:function(){var a=dojo.doc.createElement("div");dojo.style(a,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",
top:"-200px",left:"-200px",padding:"0px",margin:"0px"});var e=dojo.doc.createElement("div");dojo.style(e,{width:"200px",height:"10px"});a.appendChild(e);dojo.body().appendChild(a);e=dojo.contentBox(a);dojo.style(a,"overflow","scroll");var f=dojo.contentBox(a);dojo.body().removeChild(a);return{v:e.w-f.w,h:e.h-f.h}},_setTextAttr:function(a){this.text=this._textNode.innerHTML=a},_setColorAttr:function(a){dojo.style(this._underlayNode,"backgroundColor",a);this.color=a},_setImageTextAttr:function(a){dojo.attr(this._imageNode,
"alt",a);this.imageText=a},_setImageAttr:function(a){dojo.attr(this._imageNode,"src",a);this.image=a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a;a==="image"?(this._centerNode=this._imageNode,dojo.style(this._textNode,"display","none")):(this._centerNode=this._textNode,dojo.style(this._imageNode,"display","none"))},_disableOverflow:function(){if(this.target===dojo.body()||this.target===dojo.doc){this._overflowDisabled=!0;var a=dojo.body();this._oldOverflow=a.style&&a.style.overflow?
dojo.style(a,"overflow"):"";if(dojo.isIE&&!dojo.isQuirks){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=dojo.style(a.parentNode,"overflow")}catch(e){this._oldBodyParentOverflow="scroll"}dojo.style(a.parentNode,"overflow","hidden")}dojo.style(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=dojo.body();if(dojo.isIE&&!dojo.isQuirks)a.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow;dojo.style(a,"overflow",this._oldOverflow);if(dojo.isWebKit){var e=dojo.create("div",{style:{height:"2px"}});a.appendChild(e);setTimeout(function(){a.removeChild(e)},0)}delete this._oldOverflow}}}));