/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.widget.UpgradeBar"]||(dojo._hasResource["dojox.widget.UpgradeBar"]=!0,dojo.provide("dojox.widget.UpgradeBar"),dojo.require("dojo.window"),dojo.require("dojo.fx"),dojo.require("dojo.cookie"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.experimental("dojox.widget.UpgradeBar"),dojo.declare("dojox.widget.UpgradeBar",[dijit._Widget,dijit._Templated],{notifications:[],buttonCancel:"Close for now",noRemindButton:"Don't Remind Me Again",templateString:dojo.cache("dojox.widget",
"UpgradeBar/UpgradeBar.html",'<div class="dojoxUpgradeBar">\n\t<div class="dojoxUpgradeBarMessage" dojoAttachPoint="messageNode">message</div>\n\t<div class="dojoxUpgradeBarReminderButton" dojoAttachPoint="dontRemindButtonNode" dojoAttachEvent="onclick:_onDontRemindClick">${noRemindButton}</div>\n\t<span dojoAttachPoint="closeButtonNode" class="dojoxUpgradeBarCloseIcon" dojoAttachEvent="onclick: hide, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave" title="${buttonCancel}"></span>\n</div>\n'),
constructor:function(a,b){!a.notifications&&b&&dojo.forEach(b.childNodes,function(a){if(a.nodeType==1){var b=dojo.attr(a,"validate");this.notifications.push({message:a.innerHTML,validate:function(){var a=!0;try{a=dojo.eval(b)}catch(c){}return a}})}},this)},checkNotifications:function(){if(this.notifications.length)for(var a=0;a<this.notifications.length;a++)if(this.notifications[a].validate()){this.notify(this.notifications[a].message);break}},postCreate:function(){this.inherited(arguments);this.domNode.parentNode&&
dojo.style(this.domNode,"display","none");dojo.mixin(this.attributeMap,{message:{node:"messageNode",type:"innerHTML"}});this.noRemindButton||dojo.destroy(this.dontRemindButtonNode);if(dojo.isIE==6){var a=this,b=function(){var b=dojo.window.getBox();dojo.style(a.domNode,"width",b.w+"px")};this.connect(window,"resize",function(){b()});b()}dojo.addOnLoad(this,"checkNotifications")},notify:function(a){dojo.cookie("disableUpgradeReminders")||((!this.domNode.parentNode||!this.domNode.parentNode.innerHTML)&&
document.body.appendChild(this.domNode),dojo.style(this.domNode,"display",""),a&&this.set("message",a))},show:function(){this._bodyMarginTop=dojo.style(dojo.body(),"marginTop");this._size=dojo.contentBox(this.domNode).h;dojo.style(this.domNode,{display:"block",height:0,opacity:0});if(!this._showAnim)this._showAnim=dojo.fx.combine([dojo.animateProperty({node:dojo.body(),duration:500,properties:{marginTop:this._bodyMarginTop+this._size}}),dojo.animateProperty({node:this.domNode,duration:500,properties:{height:this._size,
opacity:1}})]);this._showAnim.play()},hide:function(){if(!this._hideAnim)this._hideAnim=dojo.fx.combine([dojo.animateProperty({node:dojo.body(),duration:500,properties:{marginTop:this._bodyMarginTop}}),dojo.animateProperty({node:this.domNode,duration:500,properties:{height:0,opacity:0}})]),dojo.connect(this._hideAnim,"onEnd",this,function(){dojo.style(this.domNode,"display","none")});this._hideAnim.play()},_onDontRemindClick:function(){dojo.cookie("disableUpgradeReminders",!0,{expires:3650});this.hide()},
_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,"dojoxUpgradeBarCloseIcon-hover")},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dojoxUpgradeBarCloseIcon-hover")}}));