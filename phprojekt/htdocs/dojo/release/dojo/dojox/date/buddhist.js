/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.date.buddhist"])dojo._hasResource["dojox.date.buddhist"]=!0,dojo.provide("dojox.date.buddhist"),dojo.experimental("dojox.date.buddhist"),dojo.require("dojox.date.buddhist.Date"),dojo.require("dojo.date"),dojox.date.buddhist.getDaysInMonth=function(b){return dojo.date.getDaysInMonth(b.toGregorian())},dojox.date.buddhist.isLeapYear=function(b){return dojo.date.isLeapYear(b.toGregorian())},dojox.date.buddhist.compare=function(b,d,a){return dojo.date.compare(b,d,a)},dojox.date.buddhist.add=
function(b,d,a){var e=new dojox.date.buddhist.Date(b);switch(d){case "day":e.setDate(b.getDate(!0)+a);break;case "weekday":var c;(d=a%5)?c=parseInt(a/5):(d=a>0?5:-5,c=a>0?(a-5)/5:(a+5)/5);var f=b.getDay(),g=0;f==6&&a>0?g=1:f==0&&a<0&&(g=-1);f+=d;if(f==0||f==6)g=a>0?2:-2;e.setDate(b.getDate(!0)+(7*c+d+g));break;case "year":e.setFullYear(b.getFullYear()+a);break;case "week":a*=7;e.setDate(b.getDate(!0)+a);break;case "month":e.setMonth(b.getMonth()+a);break;case "hour":e.setHours(b.getHours()+a);break;
case "minute":e.setMinutes(b.getMinutes()+a);break;case "second":e.setSeconds(b.getSeconds()+a);break;case "millisecond":e.setMilliseconds(b.getMilliseconds()+a)}return e},dojox.date.buddhist.difference=function(b,d,a){var d=d||new dojox.date.buddhist.Date,a=a||"day",e=b.getFullYear()-d.getFullYear(),c=1;switch(a){case "weekday":c=Math.round(dojox.date.buddhist.difference(b,d,"day"));e=parseInt(dojox.date.buddhist.difference(b,d,"week"));if(c%7==0)c=e*5;else{var a=0,f=d.getDay(),g=b.getDay(),e=parseInt(c/
7),d=c%7,b=new dojox.date.buddhist.Date(b);b.setDate(b.getDate(!0)+e*7);b=b.getDay();if(c>0)switch(!0){case f==5:a=-1;break;case f==6:a=0;break;case g==5:a=-1;break;case g==6:a=-2;break;case b+d>5:a=-2}else if(c<0)switch(!0){case f==5:a=0;break;case f==6:a=1;break;case g==5:a=2;break;case g==6:a=1;break;case b+d<0:a=2}c+=a;c-=e*2}break;case "year":c=e;break;case "month":a=b.toGregorian()>d.toGregorian()?b:d;f=b.toGregorian()>d.toGregorian()?d:b;g=a.getMonth();c=f.getMonth();if(e==0)c=a.getMonth()-
f.getMonth();else{c=12-c;c+=g;e=f.getFullYear()+1;for(a=a.getFullYear();e<a;e++)c+=12}b.toGregorian()<d.toGregorian()&&(c=-c);break;case "week":c=parseInt(dojox.date.buddhist.difference(b,d,"day")/7);break;case "day":c/=24;case "hour":c/=60;case "minute":c/=60;case "second":c/=1E3;case "millisecond":c*=b.toGregorian().getTime()-d.toGregorian().getTime()}return Math.round(c)};