/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.atom.widget.FeedEntryViewer"]||(dojo._hasResource["dojox.atom.widget.FeedEntryViewer"]=!0,dojo.provide("dojox.atom.widget.FeedEntryViewer"),dojo.require("dojo.fx"),dojo.require("dijit._Widget"),dojo.require("dijit._Templated"),dojo.require("dijit._Container"),dojo.require("dijit.layout.ContentPane"),dojo.require("dojox.atom.io.Connection"),dojo.requireLocalization("dojox.atom.widget","FeedEntryViewer",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,kk,ko,nb,nl,pl,pt,pt-pt,ro,ru,sk,sl,sv,th,tr,zh,zh-tw"),
dojo.experimental("dojox.atom.widget.FeedEntryViewer"),dojo.declare("dojox.atom.widget.FeedEntryViewer",[dijit._Widget,dijit._Templated,dijit._Container],{entrySelectionTopic:"",_validEntryFields:{},displayEntrySections:"",_displayEntrySections:null,enableMenu:!1,enableMenuFade:!1,_optionButtonDisplayed:!0,templateString:dojo.cache("dojox.atom","widget/templates/FeedEntryViewer.html",'<div class="feedEntryViewer">\n    <table border="0" width="100%" class="feedEntryViewerMenuTable" dojoAttachPoint="feedEntryViewerMenu" style="display: none;">\n        <tr width="100%"  dojoAttachPoint="entryCheckBoxDisplayOptions">\n            <td align="right">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="displayOptions" dojoAttachEvent="onclick:_toggleOptions"></span>\n            </td>\n        </tr>\n        <tr class="feedEntryViewerDisplayCheckbox" dojoAttachPoint="entryCheckBoxRow" width="100%" style="display: none;">\n            <td dojoAttachPoint="feedEntryCelltitle">\n                <input type="checkbox" name="title" value="Title" dojoAttachPoint="feedEntryCheckBoxTitle" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelTitle"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellauthors">\n                <input type="checkbox" name="authors" value="Authors" dojoAttachPoint="feedEntryCheckBoxAuthors" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelAuthors"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellcontributors">\n                <input type="checkbox" name="contributors" value="Contributors" dojoAttachPoint="feedEntryCheckBoxContributors" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelContributors"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellid">\n                <input type="checkbox" name="id" value="Id" dojoAttachPoint="feedEntryCheckBoxId" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelId"></label>\n            </td>\n            <td rowspan="2" align="right">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="close" dojoAttachEvent="onclick:_toggleOptions"></span>\n            </td>\n\t\t</tr>\n\t\t<tr class="feedEntryViewerDisplayCheckbox" dojoAttachPoint="entryCheckBoxRow2" width="100%" style="display: none;">\n            <td dojoAttachPoint="feedEntryCellupdated">\n                <input type="checkbox" name="updated" value="Updated" dojoAttachPoint="feedEntryCheckBoxUpdated" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelUpdated"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellsummary">\n                <input type="checkbox" name="summary" value="Summary" dojoAttachPoint="feedEntryCheckBoxSummary" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelSummary"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellcontent">\n                <input type="checkbox" name="content" value="Content" dojoAttachPoint="feedEntryCheckBoxContent" dojoAttachEvent="onclick:_toggleCheckbox"/>\n\t\t\t\t<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelContent"></label>\n            </td>\n        </tr>\n    </table>\n    \n    <table class="feedEntryViewerContainer" border="0" width="100%">\n        <tr class="feedEntryViewerTitle" dojoAttachPoint="entryTitleRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entryTitleHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryTitleNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n\n        <tr class="feedEntryViewerAuthor" dojoAttachPoint="entryAuthorRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entryAuthorHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryAuthorNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n\n        <tr class="feedEntryViewerContributor" dojoAttachPoint="entryContributorRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entryContributorHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryContributorNode" class="feedEntryViewerContributorNames">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n        \n        <tr class="feedEntryViewerId" dojoAttachPoint="entryIdRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entryIdHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryIdNode" class="feedEntryViewerIdText">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    \n        <tr class="feedEntryViewerUpdated" dojoAttachPoint="entryUpdatedRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entryUpdatedHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryUpdatedNode" class="feedEntryViewerUpdatedText">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    \n        <tr class="feedEntryViewerSummary" dojoAttachPoint="entrySummaryRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entrySummaryHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entrySummaryNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    \n        <tr class="feedEntryViewerContent" dojoAttachPoint="entryContentRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n\t\t\t\t\t\t<td class="lp2">\n\t\t\t\t\t\t\t<span class="lp" dojoAttachPoint="entryContentHeader"></span>\n\t\t\t\t\t\t</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryContentNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</div>\n'),
_entry:null,_feed:null,_editMode:!1,postCreate:function(){if(this.entrySelectionTopic!=="")this._subscriptions=[dojo.subscribe(this.entrySelectionTopic,this,"_handleEvent")];var a=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer");this.displayOptions.innerHTML=a.displayOptions;this.feedEntryCheckBoxLabelTitle.innerHTML=a.title;this.feedEntryCheckBoxLabelAuthors.innerHTML=a.authors;this.feedEntryCheckBoxLabelContributors.innerHTML=a.contributors;this.feedEntryCheckBoxLabelId.innerHTML=
a.id;this.close.innerHTML=a.close;this.feedEntryCheckBoxLabelUpdated.innerHTML=a.updated;this.feedEntryCheckBoxLabelSummary.innerHTML=a.summary;this.feedEntryCheckBoxLabelContent.innerHTML=a.content},startup:function(){this._displayEntrySections=this.displayEntrySections===""?["title","authors","contributors","summary","content","id","updated"]:this.displayEntrySections.split(",");this._setDisplaySectionsCheckboxes();this.enableMenu&&(dojo.style(this.feedEntryViewerMenu,"display",""),this.entryCheckBoxRow&&
this.entryCheckBoxRow2&&this.enableMenuFade&&(dojo.fadeOut({node:this.entryCheckBoxRow,duration:250}).play(),dojo.fadeOut({node:this.entryCheckBoxRow2,duration:250}).play()))},clear:function(){this.destroyDescendants();this._feed=this._entry=null;this.clearNodes()},clearNodes:function(){dojo.forEach(["entryTitleRow","entryAuthorRow","entryContributorRow","entrySummaryRow","entryContentRow","entryIdRow","entryUpdatedRow"],function(a){dojo.style(this[a],"display","none")},this);dojo.forEach(["entryTitleNode",
"entryTitleHeader","entryAuthorHeader","entryContributorHeader","entryContributorNode","entrySummaryHeader","entrySummaryNode","entryContentHeader","entryContentNode","entryIdNode","entryIdHeader","entryUpdatedHeader","entryUpdatedNode"],function(a){for(;this[a].firstChild;)dojo.destroy(this[a].firstChild)},this)},setEntry:function(a,b){this.clear();this._validEntryFields={};this._entry=a;this._feed=b;a!==null&&(this.entryTitleHeader&&this.setTitleHeader(this.entryTitleHeader,a),this.entryTitleNode&&
this.setTitle(this.entryTitleNode,this._editMode,a),this.entryAuthorHeader&&this.setAuthorsHeader(this.entryAuthorHeader,a),this.entryAuthorNode&&this.setAuthors(this.entryAuthorNode,this._editMode,a),this.entryContributorHeader&&this.setContributorsHeader(this.entryContributorHeader,a),this.entryContributorNode&&this.setContributors(this.entryContributorNode,this._editMode,a),this.entryIdHeader&&this.setIdHeader(this.entryIdHeader,a),this.entryIdNode&&this.setId(this.entryIdNode,this._editMode,a),
this.entryUpdatedHeader&&this.setUpdatedHeader(this.entryUpdatedHeader,a),this.entryUpdatedNode&&this.setUpdated(this.entryUpdatedNode,this._editMode,a),this.entrySummaryHeader&&this.setSummaryHeader(this.entrySummaryHeader,a),this.entrySummaryNode&&this.setSummary(this.entrySummaryNode,this._editMode,a),this.entryContentHeader&&this.setContentHeader(this.entryContentHeader,a),this.entryContentNode&&this.setContent(this.entryContentNode,this._editMode,a));this._displaySections()},setTitleHeader:function(a,
b){if(b.title&&b.title.value&&b.title.value!==null){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.title});a.appendChild(c.domNode)}},setTitle:function(a,b,c){c.title&&c.title.value&&c.title.value!==null&&(c.title.type=="text"?(c=document.createTextNode(c.title.value),a.appendChild(c)):(b=document.createElement("span"),b=new dijit.layout.ContentPane({refreshOnShow:!0,executeScripts:!1},b),b.attr("content",c.title.value),a.appendChild(b.domNode)),
this.setFieldValidity("title",!0))},setAuthorsHeader:function(a,b){if(b.authors&&b.authors.length>0){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.authors});a.appendChild(c.domNode)}},setAuthors:function(a,b,c){a.innerHTML="";if(c.authors&&c.authors.length>0)for(var e in c.authors)if(c.authors[e].name){b=a;if(c.authors[e].uri){var d=document.createElement("a");b.appendChild(d);d.href=c.authors[e].uri;b=d}d=c.authors[e].name;c.authors[e].email&&
(d=d+" ("+c.authors[e].email+")");d=document.createTextNode(d);b.appendChild(d);b=document.createElement("br");a.appendChild(b);this.setFieldValidity("authors",!0)}},setContributorsHeader:function(a,b){if(b.contributors&&b.contributors.length>0){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.contributors});a.appendChild(c.domNode)}},setContributors:function(a,b,c){if(c.contributors&&c.contributors.length>0)for(var e in c.contributors)b=
document.createTextNode(c.contributors[e].name),a.appendChild(b),b=document.createElement("br"),a.appendChild(b),this.setFieldValidity("contributors",!0)},setIdHeader:function(a,b){if(b.id&&b.id!==null){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.id});a.appendChild(c.domNode)}},setId:function(a,b,c){c.id&&c.id!==null&&(b=document.createTextNode(c.id),a.appendChild(b),this.setFieldValidity("id",!0))},setUpdatedHeader:function(a,
b){if(b.updated&&b.updated!==null){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.updated});a.appendChild(c.domNode)}},setUpdated:function(a,b,c){c.updated&&c.updated!==null&&(b=document.createTextNode(c.updated),a.appendChild(b),this.setFieldValidity("updated",!0))},setSummaryHeader:function(a,b){if(b.summary&&b.summary.value&&b.summary.value!==null){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.summary});
a.appendChild(c.domNode)}},setSummary:function(a,b,c){c.summary&&c.summary.value&&c.summary.value!==null&&(b=document.createElement("span"),b=new dijit.layout.ContentPane({refreshOnShow:!0,executeScripts:!1},b),b.attr("content",c.summary.value),a.appendChild(b.domNode),this.setFieldValidity("summary",!0))},setContentHeader:function(a,b){if(b.content&&b.content.value&&b.content.value!==null){var c=dojo.i18n.getLocalization("dojox.atom.widget","FeedEntryViewer"),c=new dojox.atom.widget.EntryHeader({title:c.content});
a.appendChild(c.domNode)}},setContent:function(a,b,c){c.content&&c.content.value&&c.content.value!==null&&(b=document.createElement("span"),b=new dijit.layout.ContentPane({refreshOnShow:!0,executeScripts:!1},b),b.attr("content",c.content.value),a.appendChild(b.domNode),this.setFieldValidity("content",!0))},_displaySections:function(){dojo.style(this.entryTitleRow,"display","none");dojo.style(this.entryAuthorRow,"display","none");dojo.style(this.entryContributorRow,"display","none");dojo.style(this.entrySummaryRow,
"display","none");dojo.style(this.entryContentRow,"display","none");dojo.style(this.entryIdRow,"display","none");dojo.style(this.entryUpdatedRow,"display","none");for(var a in this._displayEntrySections){var b=this._displayEntrySections[a].toLowerCase();b==="title"&&this.isFieldValid("title")&&dojo.style(this.entryTitleRow,"display","");b==="authors"&&this.isFieldValid("authors")&&dojo.style(this.entryAuthorRow,"display","");b==="contributors"&&this.isFieldValid("contributors")&&dojo.style(this.entryContributorRow,
"display","");b==="summary"&&this.isFieldValid("summary")&&dojo.style(this.entrySummaryRow,"display","");b==="content"&&this.isFieldValid("content")&&dojo.style(this.entryContentRow,"display","");b==="id"&&this.isFieldValid("id")&&dojo.style(this.entryIdRow,"display","");b==="updated"&&this.isFieldValid("updated")&&dojo.style(this.entryUpdatedRow,"display","")}},setDisplaySections:function(a){a!==null?(this._displayEntrySections=a,this._displaySections()):this._displayEntrySections=["title","authors",
"contributors","summary","content","id","updated"]},_setDisplaySectionsCheckboxes:function(){var a=["title","authors","contributors","summary","content","id","updated"],b;for(b in a)dojo.indexOf(this._displayEntrySections,a[b])==-1?dojo.style(this["feedEntryCell"+a[b]],"display","none"):this["feedEntryCheckBox"+a[b].substring(0,1).toUpperCase()+a[b].substring(1)].checked=!0},_readDisplaySections:function(){var a=[];this.feedEntryCheckBoxTitle.checked&&a.push("title");this.feedEntryCheckBoxAuthors.checked&&
a.push("authors");this.feedEntryCheckBoxContributors.checked&&a.push("contributors");this.feedEntryCheckBoxSummary.checked&&a.push("summary");this.feedEntryCheckBoxContent.checked&&a.push("content");this.feedEntryCheckBoxId.checked&&a.push("id");this.feedEntryCheckBoxUpdated.checked&&a.push("updated");this._displayEntrySections=a},_toggleCheckbox:function(a){a.checked=a.checked?!1:!0;this._readDisplaySections();this._displaySections()},_toggleOptions:function(){if(this.enableMenu){var a,b;this._optionButtonDisplayed?
(this.enableMenuFade?(a=dojo.fadeOut({node:this.entryCheckBoxDisplayOptions,duration:250}),dojo.connect(a,"onEnd",this,function(){dojo.style(this.entryCheckBoxDisplayOptions,"display","none");dojo.style(this.entryCheckBoxRow,"display","");dojo.style(this.entryCheckBoxRow2,"display","");dojo.fadeIn({node:this.entryCheckBoxRow,duration:250}).play();dojo.fadeIn({node:this.entryCheckBoxRow2,duration:250}).play()}),a.play()):(dojo.style(this.entryCheckBoxDisplayOptions,"display","none"),dojo.style(this.entryCheckBoxRow,
"display",""),dojo.style(this.entryCheckBoxRow2,"display","")),this._optionButtonDisplayed=!1):(this.enableMenuFade?(a=dojo.fadeOut({node:this.entryCheckBoxRow,duration:250}),b=dojo.fadeOut({node:this.entryCheckBoxRow2,duration:250}),dojo.connect(a,"onEnd",this,function(){dojo.style(this.entryCheckBoxRow,"display","none");dojo.style(this.entryCheckBoxRow2,"display","none");dojo.style(this.entryCheckBoxDisplayOptions,"display","");dojo.fadeIn({node:this.entryCheckBoxDisplayOptions,duration:250}).play()}),
a.play(),b.play()):(dojo.style(this.entryCheckBoxRow,"display","none"),dojo.style(this.entryCheckBoxRow2,"display","none"),dojo.style(this.entryCheckBoxDisplayOptions,"display","")),this._optionButtonDisplayed=!0)}},_handleEvent:function(a){a.source!=this&&(a.action=="set"&&a.entry?this.setEntry(a.entry,a.feed):a.action=="delete"&&a.entry&&a.entry==this._entry&&this.clear())},setFieldValidity:function(a,b){a&&(a.toLowerCase(),this._validEntryFields[a]=b)},isFieldValid:function(a){return this._validEntryFields[a.toLowerCase()]},
getEntry:function(){return this._entry},getFeed:function(){return this._feed},destroy:function(){this.clear();dojo.forEach(this._subscriptions,dojo.unsubscribe)}}),dojo.declare("dojox.atom.widget.EntryHeader",[dijit._Widget,dijit._Templated,dijit._Container],{title:"",templateString:dojo.cache("dojox.atom","widget/templates/EntryHeader.html",'<span dojoAttachPoint="entryHeaderNode" class="entryHeaderNode"></span>\n'),postCreate:function(){this.setListHeader()},setListHeader:function(a){this.clear();
if(a)this.title=a;this.entryHeaderNode.appendChild(document.createTextNode(this.title))},clear:function(){this.destroyDescendants();if(this.entryHeaderNode)for(var a=0;a<this.entryHeaderNode.childNodes.length;a++)this.entryHeaderNode.removeChild(this.entryHeaderNode.childNodes[a])},destroy:function(){this.clear()}}));