/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.layout.ToggleSplitter"]||(dojo._hasResource["dojox.layout.ToggleSplitter"]=!0,dojo.provide("dojox.layout.ToggleSplitter"),dojo.experimental("dojox.layout.ToggleSplitter"),dojo.require("dijit.layout.BorderContainer"),dojo.declare("dojox.layout.ToggleSplitter",[dijit.layout._Splitter],{open:!0,closedThreshold:5,openSize:"",_closedSize:"0",templateString:'<div class="dijitSplitter dojoxToggleSplitter" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_onMouseDown" tabIndex="0" role="separator"><div dojoAttachPoint="toggleNode" class="dijitSplitterThumb dojoxToggleSplitterIcon"></div></div>',
postCreate:function(){this._started=!1;this.inherited(arguments);var a=this.region;dojo.addClass(this.domNode,"dojoxToggleSplitter"+a.charAt(0).toUpperCase()+a.substring(1));this.connect(this,"onDblClick","_toggleMe")},startup:function(){this.inherited(arguments);var a=this.child.domNode,b=dojo.style(a,this.horizontal?"height":"width");dojo.forEach(["toggleSplitterOpen","toggleSplitterClosedThreshold","toggleSplitterOpenSize"],function(a){var b=a.substring(14),b=b.charAt(0).toLowerCase()+b.substring(1);
a in this.child&&(this[b]=this.child[a])},this);if(!this.openSize)this.openSize=this.open?b+"px":"75px";this._openStyleProps=this._getStyleProps(a,!0);this._started=!0;this.set("open",this.open);return this},_onMouseUp:function(){dojo.disconnect(this._onMoveHandle);dojo.disconnect(this._onUpHandle);delete this._onMoveHandle;delete this._onUpHandle;delete this._startPosn},_onPrelimMouseMove:function(a){if(Math.abs((this._startPosn||0)-(this.horizontal?a.clientY:a.clientX))>=3)dojo.disconnect(this._onMoveHandle),
this._startDrag(a)},_onMouseDown:function(a){if(this.open){if(!this._onUpHandle)this._onUpHandle=dojo.connect(dojo.body(),"onmouseup",this,"_onMouseUp");if(!this._onMoveHandle)this._startPosn=this.horizontal?a.clientY:a.clientX,this._onMoveHandle=dojo.connect(dojo.body(),"onmousemove",this,"_onPrelimMouseMove")}},_handleOnChange:function(){var a=this.child.domNode,b;b=this.horizontal?"height":"width";if(this.open){var c=dojo.mixin({display:"block",overflow:"auto",visibility:"visible"},this._openStyleProps);
c[b]=this._openStyleProps&&this._openStyleProps[b]?this._openStyleProps[b]:this.openSize;dojo.style(a,c);this.connect(this.domNode,"onmousedown","_onMouseDown")}else c=dojo.getComputedStyle(a),b=this._getStyleProps(a,!0,c),c=this._getStyleProps(a,!1,c),this._openStyleProps=b,dojo.style(a,c);this._setStateClass();this.container._started&&this.container._layoutChildren(this.region)},_getStyleProps:function(a,b,c){c||(c=dojo.getComputedStyle(a));var e={},d=this.horizontal?"height":"width";e.overflow=
b?c.overflow:"hidden";e.visibility=b?c.visibility:"hidden";e[d]=b?a.style[d]||c[d]:this._closedSize;var g=["Top","Right","Bottom","Left"];dojo.forEach(["padding","margin","border"],function(a){for(var d=0;d<g.length;d++){var f=a+g[d];a=="border"&&(a+="Width");void 0!==c[f]&&(e[f]=b?c[f]:0)}});return e},_setStateClass:function(){this.open?(dojo.removeClass(this.domNode,"dojoxToggleSplitterClosed"),dojo.addClass(this.domNode,"dojoxToggleSplitterOpen"),dojo.removeClass(this.toggleNode,"dojoxToggleSplitterIconClosed"),
dojo.addClass(this.toggleNode,"dojoxToggleSplitterIconOpen")):(dojo.addClass(this.domNode,"dojoxToggleSplitterClosed"),dojo.removeClass(this.domNode,"dojoxToggleSplitterOpen"),dojo.addClass(this.toggleNode,"dojoxToggleSplitterIconClosed"),dojo.removeClass(this.toggleNode,"dojoxToggleSplitterIconOpen"))},_setOpenAttr:function(a){if(this._started)this.open=a,this._handleOnChange(a,!0),this[this.open?"onOpen":"onClose"](this.child)},onOpen:function(){},onClose:function(){},_toggleMe:function(a){a&&dojo.stopEvent(a);
this.set("open",!this.open)},_onKeyPress:function(a){this.inherited(arguments)}}),dojo.extend(dijit._Widget,{toggleSplitterOpen:!0,toggleSplitterClosedThreshold:5,toggleSplitterOpenSize:""}));