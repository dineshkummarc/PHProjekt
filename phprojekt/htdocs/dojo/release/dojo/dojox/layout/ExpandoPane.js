/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.layout.ExpandoPane"]||(dojo._hasResource["dojox.layout.ExpandoPane"]=!0,dojo.provide("dojox.layout.ExpandoPane"),dojo.experimental("dojox.layout.ExpandoPane"),dojo.require("dijit.layout.ContentPane"),dojo.require("dijit._Templated"),dojo.require("dijit._Contained"),dojo.declare("dojox.layout.ExpandoPane",[dijit.layout.ContentPane,dijit._Templated,dijit._Contained,dijit._Container],{attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",
type:"innerHTML"}}),templateString:dojo.cache("dojox.layout","resources/ExpandoPane.html",'<div class="dojoxExpandoPane">\n\t<div dojoAttachPoint="titleWrapper" class="dojoxExpandoTitle">\n\t\t<div class="dojoxExpandoIcon" dojoAttachPoint="iconNode" dojoAttachEvent="onclick:toggle"><span class="a11yNode">X</span></div>\t\t\t\n\t\t<span class="dojoxExpandoTitleNode" dojoAttachPoint="titleNode">${title}</span>\n\t</div>\n\t<div class="dojoxExpandoWrapper" dojoAttachPoint="cwrapper" dojoAttachEvent="ondblclick:_trap">\n\t\t<div class="dojoxExpandoContent" dojoAttachPoint="containerNode"></div>\n\t</div>\n</div>\n'),
easeOut:"dojo._DefaultEasing",easeIn:"dojo._DefaultEasing",duration:420,startExpanded:!0,previewOpacity:0.75,previewOnDblClick:!1,baseClass:"dijitExpandoPane",postCreate:function(){this.inherited(arguments);this._animConnects=[];this._isHorizontal=!0;if(dojo.isString(this.easeOut))this.easeOut=dojo.getObject(this.easeOut);if(dojo.isString(this.easeIn))this.easeIn=dojo.getObject(this.easeIn);var a="",b=!this.isLeftToRight();if(this.region){switch(this.region){case "trailing":case "right":a=b?"Left":
"Right";break;case "leading":case "left":a=b?"Right":"Left";break;case "top":a="Top";break;case "bottom":a="Bottom"}dojo.addClass(this.domNode,"dojoxExpando"+a);dojo.addClass(this.iconNode,"dojoxExpandoIcon"+a);this._isHorizontal=/top|bottom/.test(this.region)}dojo.style(this.domNode,{overflow:"hidden",padding:0});this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");this.previewOnDblClick&&this.connect(this.getParent(),"_layoutChildren",dojo.hitch(this,function(){this._isonlypreview=
!1}))},_startupSizes:function(){this._container=this.getParent();this._closedSize=this._titleHeight=dojo.marginBox(this.titleWrapper).h;if(this.splitter){var a=this.id;dijit.registry.filter(function(b){return b&&b.child&&b.child.id==a}).forEach(dojo.hitch(this,function(a){this.connect(a,"_stopDrag","_afterResize")}))}this._currentSize=dojo.contentBox(this.domNode);this._showSize=this._currentSize[this._isHorizontal?"h":"w"];this._setupAnims();this.startExpanded?this._showing=!0:(this._showing=!1,
this._hideWrapper(),this._hideAnim.gotoPercent(99,!0));this._hasSizes=!0},_afterResize:function(){var a=this._currentSize;this._currentSize=dojo.marginBox(this.domNode);var b=this._currentSize[this._isHorizontal?"h":"w"];if(b>this._titleHeight){if(!this._showing)this._showing=!this._showing,this._showEnd();this._showSize=b;this._setupAnims()}else this._showSize=a[this._isHorizontal?"h":"w"],this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0)},_setupAnims:function(){dojo.forEach(this._animConnects,
dojo.disconnect);var a={node:this.domNode,duration:this.duration},b={},c={},d=this._isHorizontal?"height":"width";b[d]={end:this._showSize};c[d]={end:this._closedSize};this._showAnim=dojo.animateProperty(dojo.mixin(a,{easing:this.easeIn,properties:b}));this._hideAnim=dojo.animateProperty(dojo.mixin(a,{easing:this.easeOut,properties:c}));this._animConnects=[dojo.connect(this._showAnim,"onEnd",this,"_showEnd"),dojo.connect(this._hideAnim,"onEnd",this,"_hideEnd")]},preview:function(){if(!this._showing)this._isonlypreview=
!this._isonlypreview;this.toggle()},toggle:function(){this._showing?(this._hideWrapper(),this._showAnim&&this._showAnim.stop(),this._hideAnim.play()):(this._hideAnim&&this._hideAnim.stop(),this._showAnim.play());this._showing=!this._showing},_hideWrapper:function(){dojo.addClass(this.domNode,"dojoxExpandoClosed");dojo.style(this.cwrapper,{visibility:"hidden",opacity:"0",overflow:"hidden"})},_showEnd:function(){dojo.style(this.cwrapper,{opacity:0,visibility:"visible"});dojo.anim(this.cwrapper,{opacity:this._isonlypreview?
this.previewOpacity:1},227);dojo.removeClass(this.domNode,"dojoxExpandoClosed");this._isonlypreview?(this._previewShowing=!0,this.resize()):setTimeout(dojo.hitch(this._container,"layout"),15)},_hideEnd:function(){this._isonlypreview?this._previewShowing=!1:setTimeout(dojo.hitch(this._container,"layout"),25);this._isonlypreview=!1},resize:function(a){this._hasSizes||this._startupSizes(a);var b=dojo.marginBox(this.domNode);this._contentBox={w:a&&"w"in a?a.w:b.w,h:(a&&"h"in a?a.h:b.h)-this._titleHeight};
dojo.style(this.containerNode,"height",this._contentBox.h+"px");a&&dojo.marginBox(this.domNode,a);this._layoutChildren()},_trap:function(a){dojo.stopEvent(a)}}));