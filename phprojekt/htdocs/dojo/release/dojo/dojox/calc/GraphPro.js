/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojox.calc.GraphPro"]||(dojo._hasResource["dojox.calc.GraphPro"]=!0,dojo.provide("dojox.calc.GraphPro"),dojo.require("dojox.calc.Standard"),dojo.require("dijit.dijit"),dojo.require("dijit.form.ComboBox"),dojo.require("dijit.form.Select"),dojo.require("dijit.form.CheckBox"),dojo.require("dijit.ColorPalette"),dojo.require("dojox.charting.Chart2D"),dojo.require("dojox.calc.Grapher"),dojo.require("dojox.layout.FloatingPane"),dojo.require("dojox.charting.themes.Tufte"),dojo.require("dojo.colors"),
dojo.experimental("dojox.calc.GraphPro"),dojo.declare("dojox.calc.GraphPro",dojox.calc.Standard,{templateString:dojo.cache("dojox.calc","templates/GraphPro.html",'<div class="dijitReset dijitInline dojoxCalc"\n><table class="dijitReset dijitInline dojoxCalcLayout" dojoAttachPoint="calcTable" rules="none" cellspacing=0 cellpadding=0 border=0>\n\t<tr\n\t\t><td colspan="4" class="dojoxCalcTextAreaContainer"\n\t\t\t><div class="dijitTextBox dijitTextArea" style="height:10em;width:auto;max-width:15.3em;border-width:0px;" dojoAttachPoint=\'displayBox\'></div\n\t\t></td\n\t></tr>\n\t<tr\n\t\t><td colspan="4" class="dojoxCalcInputContainer"\n\t\t\t><input dojoType="dijit.form.TextBox" dojoAttachEvent="onBlur:onBlur,onKeyPress:onKeyPress" dojoAttachPoint=\'textboxWidget\'\n\t\t/></td\n\t></tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="grapherMakerButton" label="Graph" dojoAttachEvent=\'onClick:makeGrapherWindow\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="functionMakerButton" label="Func" dojoAttachEvent=\'onClick:makeFunctionWindow\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="toFracButton" label="toFrac" value="toFrac(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td colspan="1" class="dojoxCalcButtonContainer">\n\t\t</td>\n\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="seven" label="7" value=\'7\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="eight" label="8" value=\'8\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="nine" label="9" value=\'9\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="divide" label="/" value=\'/\' dojoAttachEvent=\'onClick:insertOperator\' />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="four" label="4" value=\'4\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="five" label="5" value=\'5\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="six" label="6" value=\'6\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="multiply" label="*" value=\'*\' dojoAttachEvent=\'onClick:insertOperator\' />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="one" label="1" value=\'1\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="two" label="2" value=\'2\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="three" label="3" value=\'3\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="add" label="+" value=\'+\' dojoAttachEvent=\'onClick:insertOperator\' />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="decimal" label="." value=\'.\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="zero" label="0" value=\'0\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="equals" label="x=y" value=\'=\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcMinusButtonContainer">\n\t\t\t<span dojoType="dijit.form.ComboButton" dojoAttachPoint="subtract" label=\'-\' value=\'-\' dojoAttachEvent=\'onClick:insertOperator\'>\n\n\t\t\t\t<div dojoType="dijit.Menu" style="display:none;">\n\t\t\t\t\t<div dojoType="dijit.MenuItem" dojoAttachEvent="onClick:insertMinus">\n\t\t\t\t\t\t(-)\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="clear" label="Clear" dojoAttachEvent=\'onClick:clearText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="sqrt" label="&#x221A;" value="&#x221A;" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="power" label="^" value="^" dojoAttachEvent=\'onClick:insertOperator\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="factorialButton" label="!" value="!" dojoAttachEvent=\'onClick:insertOperator\' />\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="pi" label="&#x03C0;" value="&#x03C0;" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="sin" label="sin" value="sin(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="cos" label="cos" value="cos(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="tan" label="tan" value="tan(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="e" label="&#x03F5;" value="&#x03F5;" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="log10" label="log" value="log(" value="log(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="lnE" label="ln" value="ln(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="round" label="Round" value="Round(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="intButton" label="Int" value="Int(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="PermutationButton" label="P" value="P(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="CombinationButton" label="C" value="C(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="comma" label="," value=\',\' dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\n\t</tr>\n\t<tr>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="AnsButton" label="Ans" value="Ans" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="LeftParenButton" label="(" value="(" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="RightParenButton" label=")" value=")" dojoAttachEvent=\'onClick:insertText\' />\n\t\t</td>\n\t\t<td class="dojoxCalcButtonContainer">\n\t\t\t<button dojoType="dijit.form.Button" dojoAttachPoint="enter" label="Enter" dojoAttachEvent=\'onClick:parseTextbox\' />\n\t\t</td>\n\t</tr>\n</table>\n<span dojoAttachPoint="executor" dojoType="dojox.calc._Executor" dojoAttachEvent="onLoad:executorLoaded"></span>\n</div>\n'),
grapher:null,funcMaker:null,aFloatingPane:null,executorLoaded:function(){this.inherited(arguments);dojo.addOnLoad(dojo.hitch(this,function(){this.writeStore==null&&"functionMakerButton"in this&&dojo.style(this.functionMakerButton.domNode,{visibility:"hidden"})}))},makeFunctionWindow:function(){var b=dojo.body(),c=dojo.create("div");b.appendChild(c);this.aFloatingPane=new dojox.layout.FloatingPane({resizable:!1,dockable:!0,maxable:!1,closable:!0,duration:300,title:"Function Window",style:"position:absolute;left:10em;top:10em;width:50em;"},
c);b=dojo.create("div");this.funcMaker=new dojox.calc.FuncGen({writeStore:this.writeStore,readStore:this.readStore,functions:this.functions,deleteFunction:this.executor.deleteFunction,onSaved:function(){var b,a;if((b=this.combo.get("value"))=="")this.status.set("value","The function needs a name");else if((a=this.textarea.get("value"))=="")this.status.set("value","The function needs a body");else{var e=this.args.get("value");if(!(b in this.functions))this.combo.item=this.writeStore.newItem({name:b,
args:e,body:a}),this.writeStore.save();this.saveFunction(b,e,a);this.status.set("value","Function "+b+" was saved")}},saveFunction:dojo.hitch(this,this.saveFunction)},b);this.aFloatingPane.set("content",this.funcMaker);this.aFloatingPane.startup();this.aFloatingPane.bringToTop()},makeGrapherWindow:function(){var b=dojo.body(),c=dojo.create("div");b.appendChild(c);this.aFloatingPane=new dojox.layout.FloatingPane({resizable:!1,dockable:!0,maxable:!1,closable:!0,duration:300,title:"Graph Window",style:"position:absolute;left:10em;top:5em;width:50em;"},
c);var f=this,b=dojo.create("div");this.grapher=new dojox.calc.Grapher({myPane:this.aFloatingPane,drawOne:function(a){this.array[a][this.chartIndex].resize(this.graphWidth.get("value"),this.graphHeight.get("value"));this.array[a][this.chartIndex].axes.x.max=this.graphMaxX.get("value");if(this.array[a][this.expressionIndex].get("value")=="")this.setStatus(a,"Error");else{var b,c=this.array[a][this.functionMode]=="y=";this.array[a][this.expressionIndex].get("value")!=this.array[a][this.evaluatedExpression]?
(b="x",c||(b="y"),b=f.executor.Function("",b,"return "+this.array[a][this.expressionIndex].get("value")),this.array[a][this.evaluatedExpression]=this.array[a][this.expressionIndex].value,this.array[a][this.functionRef]=b):b=this.array[a][this.functionRef];var d=this.array[a][this.colorIndex].get("value");d||(d="black");dojox.calc.Grapher.draw(this.array[a][this.chartIndex],b,{graphNumber:this.array[a][this.funcNumberIndex],fOfX:c,color:{stroke:{color:d}}});this.setStatus(a,"Drawn")}},onDraw:function(){for(var a=
0;a<this.rowCount;a++)!this.dirty&&this.array[a][this.checkboxIndex].get("checked")||this.dirty&&this.array[a][this.statusIndex].innerHTML=="Drawn"?this.drawOne(a):(this.array[a][this.chartIndex].resize(this.graphWidth.get("value"),this.graphHeight.get("value")),this.array[a][this.chartIndex].axes.x.max=this.graphMaxX.get("value"));a=dojo.position(this.outerDiv).y-dojo.position(this.myPane.domNode).y;a*=2;a=Math.abs(a);a=""+Math.max(parseInt(this.graphHeight.get("value"))+50,this.outerDiv.scrollHeight+
a);this.myPane.resize({w:""+(parseInt(this.graphWidth.get("value"))+this.outerDiv.scrollWidth),h:a})}},b);this.aFloatingPane.set("content",this.grapher);this.aFloatingPane.startup();this.aFloatingPane.bringToTop()}}));