/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.mdnd.AutoScroll"])dojo._hasResource["dojox.mdnd.AutoScroll"]=!0,dojo.provide("dojox.mdnd.AutoScroll"),dojo.declare("dojox.mdnd.AutoScroll",null,{interval:3,recursiveTimer:10,marginMouse:50,constructor:function(){this.resizeHandler=dojo.connect(dojo.global,"onresize",this,function(){this.getViewport()});dojo.ready(dojo.hitch(this,"init"))},init:function(){this._html=dojo.isWebKit?dojo.body():dojo.body().parentNode;this.getViewport()},getViewport:function(){var a=dojo.doc.documentElement,
b=window,c=dojo.body();if(dojo.isMozilla)this._v={w:a.clientWidth,h:b.innerHeight};else if(!dojo.isOpera&&b.innerWidth)this._v={w:b.innerWidth,h:b.innerHeight};else if(!dojo.isOpera&&a&&a.clientWidth)this._v={w:a.clientWidth,h:a.clientHeight};else if(c.clientWidth)this._v={w:c.clientWidth,h:c.clientHeight}},setAutoScrollNode:function(a){this._node=a},setAutoScrollMaxPage:function(){this._yMax=this._html.scrollHeight;this._xMax=this._html.scrollWidth},checkAutoScroll:function(a){this._autoScrollActive&&
this.stopAutoScroll();this._y=a.pageY;this._x=a.pageX;if(a.clientX<this.marginMouse)this._autoScrollActive=!0,this._autoScrollLeft(a);else if(a.clientX>this._v.w-this.marginMouse)this._autoScrollActive=!0,this._autoScrollRight(a);if(a.clientY<this.marginMouse)this._autoScrollActive=!0,this._autoScrollUp(a);else if(a.clientY>this._v.h-this.marginMouse)this._autoScrollActive=!0,this._autoScrollDown()},_autoScrollDown:function(){this._timer&&clearTimeout(this._timer);if(this._autoScrollActive&&this._y+
this.marginMouse<this._yMax)this._html.scrollTop+=this.interval,this._node.style.top=parseInt(this._node.style.top)+this.interval+"px",this._y+=this.interval,this._timer=setTimeout(dojo.hitch(this,"_autoScrollDown"),this.recursiveTimer)},_autoScrollUp:function(){this._timer&&clearTimeout(this._timer);if(this._autoScrollActive&&this._y-this.marginMouse>0)this._html.scrollTop-=this.interval,this._node.style.top=parseInt(this._node.style.top)-this.interval+"px",this._y-=this.interval,this._timer=setTimeout(dojo.hitch(this,
"_autoScrollUp"),this.recursiveTimer)},_autoScrollRight:function(){this._timer&&clearTimeout(this._timer);if(this._autoScrollActive&&this._x+this.marginMouse<this._xMax)this._html.scrollLeft+=this.interval,this._node.style.left=parseInt(this._node.style.left)+this.interval+"px",this._x+=this.interval,this._timer=setTimeout(dojo.hitch(this,"_autoScrollRight"),this.recursiveTimer)},_autoScrollLeft:function(){this._timer&&clearTimeout(this._timer);if(this._autoScrollActive&&this._x-this.marginMouse>
0)this._html.scrollLeft-=this.interval,this._node.style.left=parseInt(this._node.style.left)-this.interval+"px",this._x-=this.interval,this._timer=setTimeout(dojo.hitch(this,"_autoScrollLeft"),this.recursiveTimer)},stopAutoScroll:function(){this._timer&&clearTimeout(this._timer);this._autoScrollActive=!1},destroy:function(){dojo.disconnect(this.resizeHandler)}}),dojox.mdnd.autoScroll=null,function(){dojox.mdnd.autoScroll=new dojox.mdnd.AutoScroll}();