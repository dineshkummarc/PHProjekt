/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._hasResource["dojo._base.declare"]||(dojo._hasResource["dojo._base.declare"]=!0,dojo.provide("dojo._base.declare"),dojo.require("dojo._base.lang"),dojo.require("dojo._base.array"),function(){function p(e,d){throw Error("declare"+(d?" "+d:"")+": "+e);}function B(e,d,a){var b,c,f,h,i,g,j,m=this._inherited=this._inherited||{};typeof e=="string"&&(b=e,e=d,d=a);a=0;h=e.callee;(b=b||h.nom)||p("can't deduce a name to call inherited()",this.declaredClass);i=this.constructor._meta;f=i.bases;j=m.p;if(b!=
q){if(m.c!==h&&(j=0,g=f[0],i=g._meta,i.hidden[b]!==h)){(c=i.chains)&&typeof c[b]=="string"&&p("calling chained method with inherited: "+b,this.declaredClass);do if(i=g._meta,c=g.prototype,i&&(c[b]===h&&c.hasOwnProperty(b)||i.hidden[b]===h))break;while(g=f[++j]);j=g?j:-1}if(g=f[++j])if(c=g.prototype,g._meta&&c.hasOwnProperty(b))a=c[b];else{h=r[b];do if(c=g.prototype,(a=c[b])&&(g._meta?c.hasOwnProperty(b):a!==h))break;while(g=f[++j])}a=g&&a||r[b]}else{if(m.c!==h&&(j=0,(i=f[0]._meta)&&i.ctor!==h)){c=
i.chains;for((!c||c.constructor!=="manual")&&p("calling chained constructor with inherited",this.declaredClass);g=f[++j];)if((i=g._meta)&&i.ctor===h)break;j=g?j:-1}for(;g=f[++j];)if(a=(i=g._meta)?i.ctor:g)break;a=g&&a}m.c=a;m.p=j;if(a)return d===!0?a:a.apply(this,d||e)}function C(e,d){return typeof e=="string"?this.inherited(e,d,!0):this.inherited(e,!0)}function D(e){for(var d=this.constructor._meta.bases,a=0,b=d.length;a<b;++a)if(d[a]===e)return!0;return this instanceof e}function E(e,d){var a,b=
0,c=s._extraNames.length;for(a in d)a!=q&&d.hasOwnProperty(a)&&(e[a]=d[a]);for(;b<c;++b)a=s._extraNames[b],a!=q&&d.hasOwnProperty(a)&&(e[a]=d[a])}function y(e,d){var a,b,c=0,f=s._extraNames.length;for(a in d)if(b=d[a],(b!==r[a]||!(a in r))&&a!=q){if(u.call(b)=="[object Function]")b.nom=a;e[a]=b}for(;c<f;++c)if(a=s._extraNames[c],b=d[a],(b!==r[a]||!(a in r))&&a!=q){if(u.call(b)=="[object Function]")b.nom=a;e[a]=b}return e}function F(e){y(this.prototype,e);return this}function G(e,d){return function(){var g;
var a=arguments,b=a,c=a[0],f,h;h=e.length;var i;if(!(this instanceof a.callee))return v(a);if(d&&(c&&c.preamble||this.preamble)){i=Array(e.length);i[0]=a;for(f=0;;){if(c=a[0])(c=c.preamble)&&(a=c.apply(this,a)||a);c=e[f].prototype;(c=c.hasOwnProperty("preamble")&&c.preamble)&&(a=c.apply(this,a)||a);if(++f==h)break;i[f]=a}}for(f=h-1;f>=0;--f)c=e[f],(g=(h=c._meta)?h.ctor:c,c=g)&&c.apply(this,i?i[f]:a);(c=this.postscript)&&c.apply(this,b)}}function H(e,d){return function(){var a=arguments,b=a,c=a[0];
if(!(this instanceof a.callee))return v(a);if(d){if(c)(c=c.preamble)&&(b=c.apply(this,b)||b);(c=this.preamble)&&c.apply(this,b)}e&&e.apply(this,a);(c=this.postscript)&&c.apply(this,a)}}function I(e){return function(){var f;var d=arguments,a=0,b,c;if(!(this instanceof d.callee))return v(d);for(;b=e[a];++a)if(f=(c=b._meta)?c.ctor:b,b=f){b.apply(this,d);break}(b=this.postscript)&&b.apply(this,d)}}function J(e,d,a){return function(){var b,c,f=0,h=1;a&&(f=d.length-1,h=-1);for(;b=d[f];f+=h)c=b._meta,(b=
(c?c.hidden:b.prototype)[e])&&b.apply(this,arguments)}}function A(e){t.prototype=e.prototype;e=new t;t.prototype=null;return e}function v(e){var d=e.callee,a=A(d);d.apply(a,e);return a}var s=dojo,z=s._mixin,r=Object.prototype,u=r.toString,t=new Function,K=0,q="constructor";s.declare=function(e,d,a){typeof e!="string"&&(a=d,d=e,e="");var a=a||{},b,c,f,h,i,g,j,m=1,v=d;if(u.call(d)=="[object Array]"){m=e;f=[];h=[{cls:0,refs:[]}];g={};for(var w=1,t=d.length,o=0,l,x,k,n;o<t;++o){(l=d[o])?u.call(l)!="[object Function]"&&
p("mixin #"+o+" is not a callable constructor.",m):p("mixin #"+o+" is unknown. Did you use dojo.require to pull it in?",m);x=l._meta?l._meta.bases:[l];k=0;for(l=x.length-1;l>=0;--l){n=x[l].prototype;if(!n.hasOwnProperty("declaredClass"))n.declaredClass="uniqName_"+K++;n=n.declaredClass;g.hasOwnProperty(n)||(g[n]={count:0,refs:[],cls:x[l]},++w);n=g[n];k&&k!==n&&(n.refs.push(k),++k.count);k=n}++k.count;h[0].refs.push(k)}for(;h.length;){k=h.pop();f.push(k.cls);for(--w;c=k.refs,c.length==1;){k=c[0];if(!k||
--k.count){k=0;break}f.push(k.cls);--w}if(k){o=0;for(t=c.length;o<t;++o)k=c[o],--k.count||h.push(k)}}w&&p("can't build consistent linearization",m);l=d[0];f[0]=l?l._meta&&l===f[f.length-l._meta.bases.length]?l._meta.bases.length:1:0;g=f;f=g[0];m=g.length-f;d=g[m]}else g=[0],d?u.call(d)=="[object Function]"?(f=d._meta,g=g.concat(f?f.bases:d)):p("base class is not a callable constructor.",e):d!==null&&p("unknown base class. Did you use dojo.require to pull it in?",e);if(d)for(c=m-1;;--c){b=A(d);if(!c)break;
f=g[c];(f._meta?E:z)(b,f.prototype);h=new Function;h.superclass=d;h.prototype=b;d=b.constructor=h}else b={};y(b,a);f=a.constructor;if(f!==r.constructor)f.nom=q,b.constructor=f;for(c=m-1;c;--c)(f=g[c]._meta)&&f.chains&&(j=z(j||{},f.chains));b["-chains-"]&&(j=z(j||{},b["-chains-"]));f=!j||!j.hasOwnProperty(q);g[0]=h=j&&j.constructor==="manual"?I(g):g.length==1?H(a.constructor,f):G(g,f);h._meta={bases:g,hidden:a,chains:j,parents:v,ctor:a.constructor};h.superclass=d&&d.prototype;h.extend=F;h.prototype=
b;b.constructor=h;b.getInherited=C;b.inherited=B;b.isInstanceOf=D;if(e)b.declaredClass=e,s.setObject(e,h);if(j)for(i in j)if(b[i]&&typeof j[i]=="string"&&i!=q)f=b[i]=J(i,g,j[i]==="after"),f.nom=i;return h};s.safeMixin=y}());